<p-button 
    (click)="volver()"
    label="Volver" 
    icon="pi pi-arrow-left" 
    styleClass="p-button-sm p-button-outlined mb-3">
</p-button>

<ng-container *ngIf="arrendatario">

    <div class="card">
        <h4>Detalle arrendatario</h4>
        <app-detalle-arrendatario
            [arrendatario]="arrendatario"
            (actualizarEvent)="handleActualizarEvent(arrendatario)"
            (eliminarEvent)="handleEliminarEvent(arrendatario)"
        />
    </div>

    <div class="card">
        <ng-container *ngIf="arriendo">
            <h4>Pagos arriendo</h4>
            <p-table  [value]="arriendo.detalle_arriendos" [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Fecha a pagar</th>
                        <th>Monto a pagar</th>
                        <th>Fecha pagada</th>
                        <th>Monto pagado</th>
                        <th>Accion</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-detalleArr>
                    <tr >
                        <td>{{detalleArr.fecha_a_pagar}}</td>
                        <td>
                            {{ detalleArr.monto_a_pagar ? '$'+(detalleArr.monto_a_pagar | number) : 'Reajustar' }}
                        </td>
                        <td>{{(detalleArr.fecha_pagada) ?? '- - - - - -'}}</td>
                        <td >
                            {{detalleArr.monto_pagado ? '$'+(detalleArr.monto_pagado | number) : '- - - - -'}}
                        </td>
                        <td>
                            <p-button 
                                icon="pi pi-plus" 
                                label="Registrar pago"
                                styleClass="p-button-success p-button-sm"
                                (click)="editarPago(detalleArr)"
                            >
                            </p-button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
    </ng-container>
        
    </div>


    <div class="card"  *ngIf="creacionCuentaActiva">
        <h4>{{ cuentaBancaria ? 'Actualizar cuenta' : 'Registro cuenta'}}</h4>
        <app-formulario-cuenta-bancaria
            [rut_propietario]="arrendatario.rut_arr"
            [cuentaBancaria]="cuentaBancaria"
            (submitEvent)="guardarCuentaBancaria($event)"
            (cancelEvent)="cancelarCreacionCuentaBancaria()"
        />
    </div>

    <div class="card">
        <h4>Cuentas Bancarias</h4>
        <app-listado-cuenta-bancaria 
            (registroEvent)="activarCreacionCuentaBancaria()"
            (actualizarEvent)="actualizarCuentaBancaria($event)"
            (eliminarEvent)="eliminarCuentaBancaria($event)"
        />
    </div>

    

</ng-container>