<p-table 
    *ngIf="serviciosExtra$ | async as sextra"
    [value]="sextra" [tableStyle]="{'min-width': '50rem'}"
>
    <ng-template pTemplate="caption">
        <div class="caption-table right-100">
            <!-- Botón REGISTRAR -->
            <button pButton pRipple
                icon="pi pi-plus"
                class="p-button mr-2"
                style="background-color:#F78E00"
                label="Registrar"
                (click)="registrar()">
            </button>
        </div>
    </ng-template>

    <ng-template pTemplate="header">
        <tr>
            <th class="font-bold">Servicio</th>
            <th class="font-bold">
                Fecha
                <p-columnFilter type="date" field="fecha" display="menu"></p-columnFilter>
            </th>
            <th class="font-bold">Total</th>
            <th class="font-bold">Cuotas</th>
            <th class="font-bold">Valor cuota</th>
            <th></th>
        </tr>
    </ng-template>
    
    <ng-template pTemplate="body" let-servicioExtra>
        <tr>
            <td>
                <div class="text-lg font-bold p-0" style="color: #006C86">{{servicioExtra.nom_servicio}}</div>
                <br><b>Descripción:</b> {{servicioExtra.descripcion}}
            </td>
            <td>{{servicioExtra.fecha | date: 'dd/MM/yyyy'}}</td>
            <td>$ {{servicioExtra.monto | number}}</td>
            <td>{{servicioExtra.contador_cuotas}}/{{servicioExtra.nro_cuotas}}</td>
            <td>$ {{servicioExtra.monto_cuotas | number}}</td>
            <td *ngIf="!servicioExtra.pagado; else CuotasPagadas">
                <p-confirmPopup></p-confirmPopup>
                <p-button 
                    (click)="marcarCuotaPagada(servicioExtra, $event)"
                    styleClass="p-button-warning p-button-sm" 
                    icon="pi pi-plus" 
                    tooltipPosition="left" 
                    [pTooltip]="'Marcar cuota n°' + (servicioExtra.contador_cuotas+1) + ' pagada.'">
                </p-button>
            </td>
            <ng-template #CuotasPagadas>
                <td>
                    <p-tag value="Pagado" severity="success"></p-tag>
                </td>
            </ng-template>
        </tr>
    </ng-template>

</p-table>
